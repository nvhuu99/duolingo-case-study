{
    "create": "users",
    "validator": {
        "$jsonSchema": {
            "bsonType": "object",
            "required": [
                "lastname",
                "firstname",
                "birthdate",
                "device_token",
                "device_os",
                "membership",
                "engagement_level",
                "native_language"
            ],
            "properties": {
                "lastname": {
                    "bsonType": "string",
                    "maxLength": 100
                },
                "firstname": {
                    "bsonType": "string",
                    "maxLength": 100
                },
                "birthdate": {
                    "bsonType": "date",
                    "description": "Birthdate must be a valid date format."
                },
                "device_token": {
                    "bsonType": "string",
                    "maxLength": 255
                },
                "device_os": {
                    "bsonType": "string",
                    "enum": ["iOS", "Android", "other"],
                    "maxLength": 20
                },
                "membership": {
                    "bsonType": "string",
                    "enum": ["free", "subscriber", "premium"],
                    "maxLength": 20
                },
                "engagement_level": {
                    "bsonType": "string",
                    "enum": ["casual", "dedicated", "inactive"],
                    "maxLength": 20
                },
                "native_language": {
                    "bsonType": "string",
                    "maxLength": 10
                },
                "sort_key": {
                    "bsonType": "string"
                }
            }
        }
    },
    "validationAction": "error",
    "validationLevel": "strict"
}
